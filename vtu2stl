#!/usr/bin/env python3

import os
import vtk

def convert_vtu_to_stl(input_path, output_path):
    # Load VTU file
    reader = vtk.vtkXMLUnstructuredGridReader()
    reader.SetFileName(input_path)
    reader.Update()

    # Convert to STL
    geometry_filter = vtk.vtkGeometryFilter()
    geometry_filter.SetInputConnection(reader.GetOutputPort())

    writer = vtk.vtkSTLWriter()
    writer.SetFileName(output_path)
    writer.SetInputConnection(geometry_filter.GetOutputPort())
    writer.Write()

if __name__ == "__main__":
    # Specify input and output directories
    input_directory = "/home/blvksh33p/Downloads/results"
    output_directory = "."

    # Iterate over VTU files in the input directory
    for filename in os.listdir(input_directory):
        if filename.endswith(".vtu"):
            input_file_path = os.path.join(input_directory, filename)

            # Generate corresponding output file path with STL extension
            output_file_path = os.path.join(output_directory, os.path.splitext(filename)[0] + ".stl")

            # Convert VTU to STL
            convert_vtu_to_stl(input_file_path, output_file_path)
